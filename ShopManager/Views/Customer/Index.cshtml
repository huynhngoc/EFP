@{
    ViewBag.Title = "Quản lý khách hàng";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@section CustomCSS {
    @Styles.Render("~/DataTable-CSS")
    @Styles.Render("~/SweetAlert-CSS")
    <style>
        /*.dataTables_filter {
            width: 50%;
            float: right;
            text-align: right;
        }
        .dataTables_paginate{
            float: right;
            margin: 0;
        }*/
        /*cusDataTable {
            width: 100%;
        }

        .modal-open {
            overflow: scroll;
        }*/

        /*#wrapper {
            display: block;
            margin: auto;
            width: 100%;
        }*/
        /*div.dataTables_processing {
            color: red;
            border: 1px;
        }*/
    </style>
}
<div class="mail-tools tooltip-demo m-t-md">
    <button class="btn btn-white" data-toggle="tooltip" data-placement="top" title="load lai danh sách" onclick="reloadtable()"><i class="fa fa-refresh"></i>f5</button>
    <button class="btn btn-primary" data-toggle="tooltip" data-placement="top" title="them khach hang" onclick="showCusAddModal()">+</button>
</div>
@*<div class="mail-box-header">*@
        @*<h2>
            Danh sách khách hàng
        </h2>
        
</div>*@
        @*<div style="width: 97%; margin: 0 auto;">*@
        @*<div class="ibox-content">
                <table id="cusDataTable" class="table table-striped table-bordered table-hover" cellspacing="10" style="text-align: center;">
                    <thead>
                        <tr>
                            <th>Tên</th>
                            <th>Miêu tả</th>
                            <th>Địa chỉ</th>
                            <th>SDT</th>
                            <th>Email</th>
                            <th></th>
                        </tr>
                    </thead>
                    
                </table>
        </div>*@

<div class="row">
    <div class="col-lg-12">
        <div class="ibox float-e-margins">
            <div class="ibox-title">
                <h1>Danh sách khách hàng</h1>
                @*<button class="btn btn-white demo3" data-toggle="tooltip" data-placement="top" title="Load lai danh sách"><i class="fa fa-refresh"></i>F5</button>*@
            </div>
            <div class="ibox-content">
                <table class="table table-striped table-bordered table-hover " id="cusDataTable" style="text-align:center;" data-plugin-options="{'searchPlaceholder': 'Tên khách hàng...'}">
                    <thead>
                        <tr>
                            <th>Tên</th>
                            <th>Miêu tả</th>
                            <th>Địa chỉ</th>
                            <th>SDT</th>
                            <th>Email</th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                    @*<tfoot>
                <tr>
                    <th>Rendering engine</th>
                    <th>Browser</th>
                    <th>Platform(s)</th>
                    <th>Engine version</th>
                    <th>CSS grade</th>
                </tr>
            </tfoot>*@
                </table>
            </div>
        </div>
    </div>
</div>




<div class="modal fade" id="cusEditModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
     aria-hidden="true">
    <div class="modal-dialog" style="margin-top: 15%;">
        <div class="modal-content">
            <div class="modal-header" style="background-color: #1ab394">
                <h2 class="modal-title" id="myModalLabel" style="color: white; text-align: center; text-shadow: -1px 0 white, 0 1px white, 1px 0 white, 0 -1px white; ">Thông tin chi tiết</h2>
            </div>
            <div class="modal-body">
                <div class="form-group row">
                    <label for="example-text-input" class="col-xs-4 col-form-label" style="text-align:right;">Tên:</label>
                    <div class="col-xs-8">
                        <input value="" type="text" class="form-control" id="editName">
                    </div>
                </div>
                <div class="form-group row">
                    <label for="example-text-input" class="col-xs-4 col-form-label" style="text-align:right;">Địa chỉ:</label>
                    <div class="col-xs-8">
                        <input class="form-control" type="text" value="" id="editAddr">
                    </div>
                </div>
                <div class="form-group row">
                    <label for="example-text-input" class="col-xs-4 col-form-label" style="text-align:right;">Miêu tả:</label>
                    <div class="col-xs-8">
                        <textarea class="form-control" value="" id="editDes" style="overflow-y: scroll; resize:none"></textarea>
                    </div>
                </div>
                <div class="form-group row">
                    <label for="example-text-input" class="col-xs-4 col-form-label" style="text-align:right;">Số điện thoại:</label>
                    <div class="col-xs-8">
                        <input class="form-control" onchange="validate(2,this.value)" type="text" value="" id="editPhone">
                        <div><a id="phone_errorTxt" style="color: red; display:none;">Số điện thoại không hợp lệ</a></div>
                    </div>
                </div>
                <div class="form-group row">
                    <label for="example-text-input" class="col-xs-4 col-form-label" style="text-align:right;">Email:</label>
                    <div class="col-xs-8">
                        <input class="form-control" onchange="validate(1,this.value)"  type="text" value="" id="editMail">
                        <div><a id="mail_errorTxt" style="color: red; display:none;">Email không hợp lệ</a></div>
                    </div>
                </div>
                @*<table class="table" border="0" cellspacing="0" cellpadding="0">
                    <tbody>
                        <tr>
                            <td align="right">Tên:</td>
                            <td><input value="" id="editName" style="width:100%"></td>
                        </tr>
                        <tr>
                            <td align="right">Địa chỉ:</td>
                            <td><input value="" id="editAddr" style="width:100%"></td>
                        </tr>
                        <tr>
                            <td align="right">Miêu tả:</td>
                            <td><textarea id="editDes" style="resize: vertical; width: 100%"></textarea></td>
                        </tr>

                        <tr>
                            <td align="right">Số điện thoại:</td>
                            <td><input value="" id="editPhone" style="width:100%" onchange="validate(2,this.value)" /><a id="phone_errorTxt" style="color: red; display:none;">Số điện thoại không hợp lệ</a></td>
                        </tr>
                        <tr>
                            <td align="right">Email:</td>
                            <td><input value="" id="editMail" onchange="validate(1,this.value)" style="width:100%" /><a id="mail_errorTxt" style="color: red; display:none;">Email không hợp lệ</a></td>
                        </tr>
                    </tbody>
                </table>*@
                
            </div>
            <div class="modal-footer"><input type="hidden" id="cusEditID" value="" />
                <button type="button" id="btnSave" class="btn btn-default" data-dismiss="modal" onclick="editCustomerDetail();  clear_table();">Lưu</button>
                <button type="button" id="btnCloseModal" class="btn btn-default" data-dismiss="modal" onclick="clear_table();">Huỷ</button>
            </div>
        </div>
    </div>
</div>


<div class="modal fade" id="sucModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" data-backdrop="static">
   <div class="modal-dialog" style="margin-top: 15%;">
        <div class="modal-content">
            <div class="modal-header" style="background-color: #1ab394; color:white">
                <h1 class="modal-title" id="sucTxt" style="text-align:center;">Tạo mới khách hàng thành công!</h1>
            </div>
            <div class="modal-footer" style="text-align:center;">
                <button type="button" id="btnCloseModal" class="btn btn-default" data-dismiss="modal" onclick="oTable.fnDraw();">Đóng</button>
            </div>
        </div>
    </div>

</div>


@*<div class="sweet-alert showSweetAlert hidden" id="sucModal" data-custom-class="" data-has-cancel-button="false" data-has-confirm-button="true" data-allow-outside-click="false" data-has-done-function="false" data-animation="pop" data-timer="null" style="display: block; margin-top: -170px;">
    <div class="sa-icon sa-error" style="display: none;">
        <span class="sa-x-mark">
            <span class="sa-line sa-left"></span>
            <span class="sa-line sa-right"></span>
        </span>
    </div><div class="sa-icon sa-warning pulseWarning" style="display: none;">
        <span class="sa-body pulseWarningIns"></span>
        <span class="sa-dot pulseWarningIns"></span>
    </div><div class="sa-icon sa-info" style="display: none;"></div><div class="sa-icon sa-success animate" style="display: block;">
        <span class="sa-line sa-tip animateSuccessTip"></span>
        <span class="sa-line sa-long animateSuccessLong"></span>

        <div class="sa-placeholder"></div>
        <div class="sa-fix"></div>
    </div><div class="sa-icon sa-custom" style="display: none;"></div><h2>Deleted!</h2>
    <p style="display: block;">Your imaginary file has been deleted.</p>
    <fieldset>
        <input type="text" tabindex="3" placeholder="">
        <div class="sa-input-error"></div>
    </fieldset><div class="sa-error-container">
        <div class="icon">!</div>
        <p>Not valid!</p>
    </div><div class="sa-button-container">
        <button class="cancel" tabindex="2" style="display: none; box-shadow: none;">Cancel</button>
        <button class="confirm" tabindex="1" style="display: inline-block; background-color: rgb(174, 222, 244); box-shadow: rgba(174, 222, 244, 0.8) 0px 0px 2px, rgba(0, 0, 0, 0.0470588) 0px 0px 0px 1px inset;">OK</button>
    </div>
</div>*@




<div class="modal fade" id="failModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
     aria-hidden="true" data-backdrop="static">
    <div class="modal-dialog" style="margin-top: 15%;">
        <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title" id="failTxt" style="text-align:center;">Tạo mới thất bại</h1>
            </div>
            <div class="modal-footer" style="text-align:center">
                <button type="button" id="btnCloseModal" class="btn btn-default" data-dismiss="modal">Đóng</button>
            </div>
        </div>
    </div>
</div>

@*<div class="modal fade" id="createFailModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
     aria-hidden="true" data-backdrop="static">
    <div class="modal-dialog" style="margin-top: 15%;">
        <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title" style="text-align:center;">Tạo mới thất bại</h1>
                <h3 style="text-align:center;">Vui lòng nhập tên</h3>
            </div>
            <div class="modal-footer" style="text-align:center">
                <button type="button" id="btnSave" class="btn btn-default" data-dismiss="modal" onclick="showCusAddModal();">Tạo lại</button>
                <button type="button" id="btnCloseModal" class="btn btn-default" data-dismiss="modal">Đóng</button>
            </div>
        </div>
    </div>
</div>*@


<div class="modal fade" id="cusAddModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
     aria-hidden="true" data-backdrop="static">
    <div class="modal-dialog" style="margin-top: 15%;">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="myModalLabel">Thông tin khách hàng mới</h2>
            </div>
            <div class="modal-body">
                <table class="table table-hover">
                    <tbody>
                        <tr>
                            <td>Tên:</td>
                            <td><input value="" id="addNameTxt"></td>
                        </tr>

                        <tr>
                            <td>Địa chỉ:</td>
                            <td><input value="" id="addAddrTxt"></td>
                        </tr>
                        <tr>
                            <td>Thông tin:</td>
                            <td><textarea id="addDescTxt"></textarea></td>
                        </tr>
                        <tr>
                            <td>Số điện thoại</td>
                            <td><input value="" id="addPhoneTxt"></td>
                        </tr>
                        <tr>
                            <td>Email:</td>
                            <td><input value="" id="addMailTxt" onchange="validate(1,this.value)"></td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="modal-footer">
                <button type="button" id="btnCloseModal" class="btn btn-default" onclick="addCustomer(); " data-dismiss="modal">Tạo mới</button>
                <button type="button" id="btnCloseModal" class="btn btn-default" data-dismiss="modal" onclick="clear_table()">Huỷ</button>
            </div>
        </div>
    </div>
</div>


@section CustomJS {
    @Scripts.Render("~/DataTable-JS")
    @Scripts.Render("~/SweetAlert-JS")
    @Scripts.Render("~/Customer-JS")    
}
